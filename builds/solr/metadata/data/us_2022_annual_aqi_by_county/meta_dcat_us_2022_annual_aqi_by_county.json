{
  "dct:title": "2022 US EPA Annual AQI by County ",
  "dct:creator": ["US Environmental Protection Agency"],
  "dct:identifier": "https://aqs.epa.gov/aqsweb/airdata/download_files.html",
  "dct:publisher": ["US Environmental Protection Agency"],
  "dct:rights": "Public Domain",
  "dct:license": "Unless otherwise specified, all data produced by the U.S EPA is by default in the public domain and is not subject to domestic copyright protection under 17 U.S.C. \u00a7 105 . More details on the U.S. Public Domain license are available here:\u00a0\n\nhttp://www.usa.gov/publicdomain/label/1.0/\u00a0\n\nAdditionally, please be advised that although these data have been processed successfully on a computer system at the U.S. EPA, no warranty expressed or implied is made regarding the accuracy or utility of the data on any other system or for general or scientific purposes, nor shall the act of distribution constitute any such warranty.",
  "dct:coverage": ["USA"],
  "dct:relation": ["us_2020_census_county_fips", "us_2022_county_tl"],
  "dct:type": "Vector Dataset",
  "dct:issued": "2022-11-14T00:00:00Z",
  "dct:description": "The AirData Air Quality Index Summary Report displays an annual summary of Air Quality Index (AQI) values for counties or core based statistical areas (CBSA). Air Quality Index is an indicator of overall air quality, because it takes into account all of the criteria air pollutants measured within a geographic area. Although AQI includes all available pollutant measurements, you should be aware that many areas have monitoring stations for some, but not all, of the pollutants. Each row of the AQI Report lists summary values for one year for one county or CBSA. The summary values include both qualitative measures (days of the year having \"good\" air quality, for example) and descriptive statistics (median AQI value, for example).\n\nSummary statistics for the current year are incomplete because data are still being reported and quality assured. Data for the current year are considered preliminary until May 1 of the following year. Therefore, comparing reported values for the current year with previous years may not be valid.\n\nsee https://www.epa.gov/outdoor-air-quality-data/about-air-data-reports for more information.",
  "prov:qualifiedAttribution": "The Air Quality Index (AQI) values are presented in several files. AQI is calculated each day for each monitor for the Criteria Gases and PM10 and PM2.5 (FRM and non FRM). The AQI values are on the respective records in those Daily Summary files. There are also annual summary AQI files that show by CBSA (metro area) or county the annual statistics for AQI (max, number of values in each category, etc.). This file has one record per year per CBSA or county. There are also daily summary files that show the AQI by CBSA or county. These have one record per day per CBSA or county.",
  "dcat:keyword": ["EPA", "AQI", "annual", "USA", "county"],
  "dct:language": "en",
  "adms:representationTechnique": "table",
  "prov:action": "#########\n# GDSC ETL is performed in two steps: shell script to ETL data into postgres\n# and then additional transformations with SQL in postGIS (if needed).\n####\n\n#########\n# Step 1 - bash script (pseudo code)\n####\n\n# create directory structure and move into it\nmkdir -p /data/us_2022_annual_aqi_by_county/{download,etl} && cd /data/us_2022_annual_aqi_by_county\n\n# set update flag based on last update and update frequency\ndo_update=0 if date() < last_update + update_frequency else do_update = 1\n\n# download if update flag is set:\nif do_update == 1 then\n  OPENSSL_CONF=/openssl/openssl.conf curl -o download/us_2022_annual_aqi_by_county.zip 'https://aqs.epa.gov/aqsweb/airdata/annual_aqi_by_county_2022.zip'\n\n# unzip to download directory if update flag is set\nif do_update == 1 then\n  unzip -d download download/us_2022_annual_aqi_by_county.zip && rm download/us_2022_annual_aqi_by_county.zip\n\n# remove spaces for all column headers in csv\n  sed -i '1 s/ /_/g' download/annual_aqi_by_county_2022.csv\n\n# load into postGIS with:\n  ogr2ogr -lco GEOMETRY_NAME=geom -f PostgreSQL PG:\"<postgres connection>\" download/annual_aqi_by_county_2022.csv -nln us_2022_annual_aqi_by_county\n# rename data table to temp\npsql -d $POSTGRES_DB -U $POSTGRES_USER -p $POSTGRES_PORT -h postgis-4ae5sa467ea6rcny -c \"\nALTER TABLE us_2022_annual_aqi_by_county RENAME TO temp;\"\n\n# Create copy of geom dependency\npg_dump -d $POSTGRES_DB -U $POSTGRES_USER -p $POSTGRES_PORT -h postgis-p6kuqm33g3kz9oyw -t us_2022_county_tl | sed 's/us_2022_county_tl/us_2022_annual_aqi_by_county/g' | psql -d $POSTGRES_DB -U $POSTGRES_USER -p $POSTGRES_PORT -h postgis-4ae5sa467ea6rcny\n\n# create copy of the FIPS lookup table\npg_dump -d $POSTGRES_DB -U $POSTGRES_USER -p $POSTGRES_PORT -h postgis-rcvsm5xsqat56bhl -t us_2020_census_county_fips | psql -d $POSTGRES_DB -U $POSTGRES_USER -p $POSTGRES_PORT -h postgis-4ae5sa467ea6rcny\n\n# join as per custom parameters\npsql -d $POSTGRES_DB -U $POSTGRES_USER -p $POSTGRES_PORT -h postgis-4ae5sa467ea6rcny -c \"\nALTER TABLE temp ADD COLUMN geoid varchar;\nUPDATE temp SET geoid = CONCAT(us_2020_census_county_fips.state,us_2020_census_county_fips.county)\n  FROM us_2020_census_county_fips\n  WHERE position(temp.state in us_2020_census_county_fips.state_name)>0\n  AND position(temp.county in us_2020_census_county_fips.county_name)>0;\n\nALTER TABLE us_2022_annual_aqi_by_county ADD COLUMN \\\"state\\\" varchar;\nUPDATE us_2022_annual_aqi_by_county SET \\\"state\\\"=temp.\\\"state\\\"::varchar\n  FROM temp\n  WHERE us_2022_annual_aqi_by_county.geoid = temp.geoid;\n\nALTER TABLE us_2022_annual_aqi_by_county ADD COLUMN \\\"county\\\" varchar;\nUPDATE us_2022_annual_aqi_by_county SET \\\"county\\\"=temp.\\\"county\\\"::varchar\n  FROM temp\n  WHERE us_2022_annual_aqi_by_county.geoid = temp.geoid;\n\nALTER TABLE us_2022_annual_aqi_by_county ADD COLUMN \\\"year\\\" varchar;\nUPDATE us_2022_annual_aqi_by_county SET \\\"year\\\"=temp.\\\"year\\\"::varchar\n  FROM temp\n  WHERE us_2022_annual_aqi_by_county.geoid = temp.geoid;\n\nALTER TABLE us_2022_annual_aqi_by_county ADD COLUMN \\\"days_with_aqi\\\" int4;\nUPDATE us_2022_annual_aqi_by_county SET \\\"days_with_aqi\\\"=temp.\\\"days_with_aqi\\\"::int4\n  FROM temp\n  WHERE us_2022_annual_aqi_by_county.geoid = temp.geoid;\n\nALTER TABLE us_2022_annual_aqi_by_county ADD COLUMN \\\"good_days\\\" int4;\nUPDATE us_2022_annual_aqi_by_county SET \\\"good_days\\\"=temp.\\\"good_days\\\"::int4\n  FROM temp\n  WHERE us_2022_annual_aqi_by_county.geoid = temp.geoid;\n\nALTER TABLE us_2022_annual_aqi_by_county ADD COLUMN \\\"moderate_days\\\" int4;\nUPDATE us_2022_annual_aqi_by_county SET \\\"moderate_days\\\"=temp.\\\"moderate_days\\\"::int4\n  FROM temp\n  WHERE us_2022_annual_aqi_by_county.geoid = temp.geoid;\n\nALTER TABLE us_2022_annual_aqi_by_county ADD COLUMN \\\"unhealthy_for_sensitive_groups_days\\\" int4;\nUPDATE us_2022_annual_aqi_by_county SET \\\"unhealthy_for_sensitive_groups_days\\\"=temp.\\\"unhealthy_for_sensitive_groups_days\\\"::int4\n  FROM temp\n  WHERE us_2022_annual_aqi_by_county.geoid = temp.geoid;\n\nALTER TABLE us_2022_annual_aqi_by_county ADD COLUMN \\\"unhealthy_days\\\" int4;\nUPDATE us_2022_annual_aqi_by_county SET \\\"unhealthy_days\\\"=temp.\\\"unhealthy_days\\\"::int4\n  FROM temp\n  WHERE us_2022_annual_aqi_by_county.geoid = temp.geoid;\n\nALTER TABLE us_2022_annual_aqi_by_county ADD COLUMN \\\"very_unhealthy_days\\\" int4;\nUPDATE us_2022_annual_aqi_by_county SET \\\"very_unhealthy_days\\\"=temp.\\\"very_unhealthy_days\\\"::int4\n  FROM temp\n  WHERE us_2022_annual_aqi_by_county.geoid = temp.geoid;\n\nALTER TABLE us_2022_annual_aqi_by_county ADD COLUMN \\\"hazardous_days\\\" int4;\nUPDATE us_2022_annual_aqi_by_county SET \\\"hazardous_days\\\"=temp.\\\"hazardous_days\\\"::int4\n  FROM temp\n  WHERE us_2022_annual_aqi_by_county.geoid = temp.geoid;\n\nALTER TABLE us_2022_annual_aqi_by_county ADD COLUMN \\\"max_aqi\\\" int4;\nUPDATE us_2022_annual_aqi_by_county SET \\\"max_aqi\\\"=temp.\\\"max_aqi\\\"::int4\n  FROM temp\n  WHERE us_2022_annual_aqi_by_county.geoid = temp.geoid;\n\nALTER TABLE us_2022_annual_aqi_by_county ADD COLUMN \\\"90th_percentile_aqi\\\" int4;\nUPDATE us_2022_annual_aqi_by_county SET \\\"90th_percentile_aqi\\\"=temp.\\\"90th_percentile_aqi\\\"::int4\n  FROM temp\n  WHERE us_2022_annual_aqi_by_county.geoid = temp.geoid;\n\nALTER TABLE us_2022_annual_aqi_by_county ADD COLUMN \\\"median_aqi\\\" int4;\nUPDATE us_2022_annual_aqi_by_county SET \\\"median_aqi\\\"=temp.\\\"median_aqi\\\"::int4\n  FROM temp\n  WHERE us_2022_annual_aqi_by_county.geoid = temp.geoid;\n\nALTER TABLE us_2022_annual_aqi_by_county ADD COLUMN \\\"days_co\\\" int4;\nUPDATE us_2022_annual_aqi_by_county SET \\\"days_co\\\"=temp.\\\"days_co\\\"::int4\n  FROM temp\n  WHERE us_2022_annual_aqi_by_county.geoid = temp.geoid;\n\nALTER TABLE us_2022_annual_aqi_by_county ADD COLUMN \\\"days_no2\\\" int4;\nUPDATE us_2022_annual_aqi_by_county SET \\\"days_no2\\\"=temp.\\\"days_no2\\\"::int4\n  FROM temp\n  WHERE us_2022_annual_aqi_by_county.geoid = temp.geoid;\n\nALTER TABLE us_2022_annual_aqi_by_county ADD COLUMN \\\"days_ozone\\\" int4;\nUPDATE us_2022_annual_aqi_by_county SET \\\"days_ozone\\\"=temp.\\\"days_ozone\\\"::int4\n  FROM temp\n  WHERE us_2022_annual_aqi_by_county.geoid = temp.geoid;\n\nALTER TABLE us_2022_annual_aqi_by_county ADD COLUMN \\\"days_pm2.5\\\" int4;\nUPDATE us_2022_annual_aqi_by_county SET \\\"days_pm2.5\\\"=temp.\\\"days_pm2.5\\\"::int4\n  FROM temp\n  WHERE us_2022_annual_aqi_by_county.geoid = temp.geoid;\n\nALTER TABLE us_2022_annual_aqi_by_county ADD COLUMN \\\"days_pm10\\\" int4;\nUPDATE us_2022_annual_aqi_by_county SET \\\"days_pm10\\\"=temp.\\\"days_pm10\\\"::int4\n  FROM temp\n  WHERE us_2022_annual_aqi_by_county.geoid = temp.geoid;\n\nDROP table temp;\nDROP table us_2020_census_county_fips;\n\"",
  "prov:wasGeneratedBy": "GDSC automation (see Process Step)",
  "dcat:contactPoint": ["Timothy Norris", "Librarian Associate Professor", "University of Miami Libraries, Frost Institute for Data Science and Computing", "txn60@miami.edu"],
  "gdsc:label": "county",
  "gdsc:attributes": ["state;The state name.;;varchar;", "county;The county name.;;varchar;", "year;The year.;;varchar;", "days_with_aqi;Days with valid AQI index calculated.;;int4;days", "good_days;Days with AQI measure from 0-50.;;int4;days", "moderate_days;Days with AQI measure from 51-100.;;int4;days", "unhealthy_for_sensitive_groups_days;Days with AQI measure from 101-150.;;int4;days", "unhealthy_days;Days with AQI measure from 151-200.;;int4;days", "very_unhealthy_days;Days with AQI measure from 201-300.;;int4;days", "hazardous_days;Days with AQI measure from 301-500.;;int4;days", "max_aqi;The maximum AQI in the county for the year.;;int4;AQI", "90th_percentile_aqi;90 percent of daily AQI values during the year were less than or equal to the 90th percentile value.;;int4;AQI", "median_aqi;Half of daily AQI values during the year were less than or equal to the median value, and half equaled or exceeded it.;;int4;AQI", "days_co;The number of days CO was the main pollutant used to calculate the AQI.;;int4;days", "days_no2;The number of days NO2 was the main pollutant used to calculate the AQI.;;int4;days", "days_ozone;The number of days Ozone was the main pollutant used to calculate the AQI.;;int4;days", "days_pm2.5;The number of days PM2.5 was the main pollutant used to calculate the AQI.;;int4;days", "days_pm10;The number of days PM10 was the main pollutant used to calculate the AQI.;;int4;days"],
  "gdsc:collections": ["Climate Change", "Health Outcomes", "Vulnerability"],
  "gdsc:functions": ["gdsc_get_attributes"],
  "gdsc:sponsor": ["IDSC;https://idsc.miami.edu", "Library;https://www.library.miami.edu"],
  "dcat:downloadURL": "https://aqs.epa.gov/aqsweb/airdata/annual_aqi_by_county_2022.zip",
  "gdsc:tablename": "us_2022_annual_aqi_by_county",
  "dcat:qualifiedRelation": ["us_2020_census_county_fips", "us_2022_county_tl"],
  "gdsc:up": "true",
  "gdsc:podID": "postgis-4ae5sa467ea6rcny",
  "dct:modified": "2024-10-03 15:55:32",
  "dct:accrualPeriodicity": "As Needed",
  "spdx:checksum": "TBD",
  "dct:extent": ["68553", "67K"],
  "dcat:bbox": "not yet know"
}
